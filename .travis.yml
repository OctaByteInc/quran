language: python
sudo: false

python:
  - '3.7'

before_install:
    - npm i -g firebase firebase-tools@7.6.1
    - firebase setup:emulators:firestore
    - firebase emulators:start --only firestore &

env:
  - FIRESTORE_EMULATOR_HOST=localhost:8080

install:
  - pip install -e .

before_script:
  - python endpoint_server.py &

script:
  - pytest